/*Drop tables if exists*/

DROP TABLE IF EXISTS intervenants;
DROP TABLE IF EXISTS intervention;
DROP TABLE IF EXISTS vehicle;
DROP TABLE IF EXISTS model;
DROP TABLE IF EXISTS client;
DROP TABLE IF EXISTS employee;
DROP TABLE IF EXISTS mark;
DROP TYPE work_category;

/*Create an ENUM*/
CREATE TYPE work_category AS ENUM ('Assistant', 'Mechanic');

/* CREATE TABLE Client*/
CREATE TABLE client (
  id         serial PRIMARY KEY,
  civ        VARCHAR(255),
  last_name  VARCHAR(255),
  first_name VARCHAR(255),
  birthday   DATE,
  address    VARCHAR(255),
  prof_phone VARCHAR(255),
  priv_phone VARCHAR(255),
  fax        VARCHAR(255)
);
/* CREATE TABLE Employee*/
CREATE TABLE employee (
  id         serial PRIMARY KEY,
  last_name  VARCHAR(255)  NOT NULL,
  first_name VARCHAR(255)  NOT NULL,
  salary     REAL          NOT NULL,
  category   work_category NOT NULL
);
/* CREATE TABLE Mark*/
CREATE TABLE mark (
  id      serial PRIMARY KEY,
  mark    VARCHAR(255) NOT NULL,
  country VARCHAR(255) NOT NULL
);
/* CREATE TABLE Model*/
CREATE TABLE model (
  id      serial PRIMARY KEY,
  mark_id INT          NOT NULL,
  modele  VARCHAR(255) NOT NULL,
  FOREIGN KEY (mark_id) REFERENCES mark (id)
);
/* CREATE TABLE Vehicle*/
CREATE TABLE vehicle (
  id        serial PRIMARY KEY,
  client_id INTEGER NOT NULL,
  model_id  INTEGER NOT NULL,
  immat     INTEGER NOT NULL,
  year      INTEGER NOT NULL,
  FOREIGN KEY (client_id) REFERENCES client (id),
  FOREIGN KEY (model_id) REFERENCES model (id)
);

/* CREATE TABLE Intervention*/
CREATE TABLE intervention (
  id           serial PRIMARY KEY,
  vehicle_id   INT          NOT NULL,
  type         VARCHAR(255) NOT NULL,
  start_date   DATE         NOT NULL,
  end_date     DATE         NOT NULL,
  count_interv REAL         NOT NULL,
  FOREIGN KEY (vehicle_id) REFERENCES vehicle (id)
);

/* CREATE TABLE Intervenants*/
CREATE TABLE intervenants (
  intervention_id INTEGER NOT NULL,
  employee_id     INTEGER NOT NULL,
  start_date      DATE    NOT NULL,
  end_date        DATE    NOT NULL,
  FOREIGN KEY (intervention_id) REFERENCES intervention (id),
  FOREIGN KEY (employee_id) REFERENCES employee (id),
  PRIMARY KEY (intervention_id, employee_id)
);

/* CHANGE the stars values of SERIAL for employee and model tables; */
ALTER SEQUENCE employee_id_seq
  RESTART WITH 53;
ALTER SEQUENCE model_id_seq
  RESTART WITH 2;

/* Fill Client table */
INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Cherifa', 'MAHBOUBA', '08/08/1957', 'Alger', '1111111111', '0000000000', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Lamia ', 'TAHMI', '31/12/1955', 'Tiaret', '3333333333', '2222222222', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mle', 'Ghania', 'DAIF AMROUNI', '31/12/1955', 'Biskra', '5555555555', '4444444444', '0123456789');

INSERT INTO client
VALUES (DEFAULT, 'Mle', 'Chahinez', 'MELEK', '27/06/1955', 'Oran', '6666666666', '7777777777', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Noura ', 'TECHTACH', '22/03/1949', 'Laghouat', '8888888888', '9999999999', '1234567890');

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Widad', 'TOUATI', '14/8/1965', 'Adrar', '1212121212', '1010101010', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mle', 'Faiza', 'ABLOUL', '28/10/1967', 'Adrar', '1313131313', '1414141414', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Assia', 'HORRA', '08/12/1963', 'Skikda', '1515151515', '1616161616', '2345678901');

INSERT INTO client
VALUES (DEFAULT, 'Mle', 'Souad', 'MESBAH', '30/08/1972', 'Chlef', '1818181818', '1717171717', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Houda', 'GROUDA', '20/02/1950', 'Annaba', '1919191919', '2020202020', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mle', 'Saida', 'FENNICHE', NULL, 'Bayedh', '2121212121', '2323232323', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Samia', 'OUALI', '17/11/1966', 'Oum Bouaki', '2525252525', '2424242424', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme', 'Fatiha', 'HADDAD', '20/09/1980', 'Sidi Belabass', '2626262626', '2727272727', NULL);

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Djamal', 'MATI', NULL, 'Tmouchent', '2828282828', '2929292929', NULL);

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Mohamed', 'GHRIAR', '24/06/1950', 'Blida', '3131313131', '3030303030', '3456789012');

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Ali', 'LAAOUAR', NULL, 'Ouaregla', '3232323232', '3434343434', '4567890123');

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Messoud', 'AOUIZ', '24/11/1958', 'Costontine', '3535353535', '3636363636', '5678901234');

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Farid', 'AKILI', '06/05/1961', 'Ghelizan', '3838383838', '3737373737', NULL);

INSERT INTO client
VALUES (DEFAULT, 'Mme.', 'Dalila', 'MOUHTADI', NULL, 'Djelfa', '4040404040', '3939393939', NULL);

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Younes', 'CHALAH', NULL, 'Tbessa', '4141414141', '4242424242', '6789012345');

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Boubeker', 'BARAKAT', '08/11/1935', 'Bejaia', '4343434343', '4545454545', NULL);

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Seddik', 'HMIA', NULL, 'Bouira', '4646464646', '4747474747', NULL);

INSERT INTO client
VALUES (DEFAULT, 'M.', 'Lamine', 'MZEABAT', '09/12/1965', 'Tizi Ouzou', '4848484848', '4949494949', NULL);


/* Fill Employee table */
INSERT INTO employee
VALUES (DEFAULT, 'LACHEMI', 'Bouzid', 25000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'BOUCHEMLA', 'Elias', 10000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'HADJ', 'Zouhir', 12000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'OUSEDDIK', 'Hakim', 20000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'ABAD', 'Abdelhamid', 13000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'BABACI', 'Tayeb', 21300, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'BELHAMDI', 'Mourad', 19500, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'IGOUDJIL', 'Redouane', 15000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'KOULA', 'Brahim', 23100, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'RAHALI', 'Ahcene', 24000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'CHAOUI', 'Ismail', 13000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'BADI', 'Hatem', 14000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'MOUHAMMEDI', 'Mustapha', 24000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'FEKAR', 'Abdelaziz', 13500, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'SAIDOUNI', 'Wahid', 25000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'BOULARAS', 'Farid', 14000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'CHAKER', 'Nassim', 26000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'TERKI', 'Yacine', 23000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'TEBIBEL', 'Ahmed', 17000, 'Assistant');
INSERT INTO employee
VALUES (DEFAULT, 'LARDJOUNE', 'Karim', 25000, 'Assistant');

/* Fill Mark table */
INSERT INTO mark
VALUES (DEFAULT, 'LAMBORGHINI', 'ITALIE');
INSERT INTO mark
VALUES (DEFAULT, 'AUDI', 'ALLEMAGNE');
INSERT INTO mark
VALUES (DEFAULT, 'ROLLS-ROYCE', 'GRANDE-BRERT');
INSERT INTO mark
VALUES (DEFAULT, 'BMW', 'ALLEMAGNE');
INSERT INTO mark
VALUES (DEFAULT, 'CADILAC', 'USA');
INSERT INTO mark
VALUES (DEFAULT, 'CHRYSLER', 'USA');
INSERT INTO mark
VALUES (DEFAULT, 'FERRARI', 'ITALIE');
INSERT INTO mark
VALUES (DEFAULT, 'HONDA', 'JAPON');
INSERT INTO mark
VALUES (DEFAULT, 'JAGUAR', 'GRANDE-BRERT');
INSERT INTO mark
VALUES (DEFAULT, 'ALFA-ROMEO', 'ITALIE');
INSERT INTO mark
VALUES (DEFAULT, 'LEXUS', 'JAPON');
INSERT INTO mark
VALUES (DEFAULT, 'LOTUS', 'GRANDE-BRERT');
INSERT INTO mark
VALUES (DEFAULT, 'MASERATI', 'ITALIE');
INSERT INTO mark
VALUES (DEFAULT, 'MERCEDES', 'ALLEMAGNE');
INSERT INTO mark
VALUES (DEFAULT, 'PEUGEOT', 'FRANCE');
INSERT INTO mark
VALUES (DEFAULT, 'PORSCHE', 'ALLEMAGNE');
INSERT INTO mark
VALUES (DEFAULT, 'RENAULT', 'FRANCE');
INSERT INTO mark
VALUES (DEFAULT, 'SAAB', 'SUEDE');
INSERT INTO mark
VALUES (DEFAULT, 'TOYOTA', 'JAPON');
INSERT INTO mark
VALUES (DEFAULT, 'VENTURI', 'FRANCE');
INSERT INTO mark
VALUES (DEFAULT, 'VOLVO', 'SUEDE');


/* Fill Model table */
INSERT INTO model
VALUES (DEFAULT, 1, 'Diablo');
INSERT INTO model
VALUES (DEFAULT, 2, 'Serie 5');
INSERT INTO model
VALUES (DEFAULT, 10, 'NSX');
INSERT INTO model
VALUES (DEFAULT, 14, 'Classe C');
INSERT INTO model
VALUES (DEFAULT, 17, 'Safrane');
INSERT INTO model
VALUES (DEFAULT, 20, '400 GT');
INSERT INTO model
VALUES (DEFAULT, 12, 'Esprit');
INSERT INTO model
VALUES (DEFAULT, 15, '605');
INSERT INTO model
VALUES (DEFAULT, 19, 'Previa');
INSERT INTO model
VALUES (DEFAULT, 7, '550 Maranelllo');
INSERT INTO model
VALUES (DEFAULT, 3, 'Bentley-Continental');
INSERT INTO model
VALUES (DEFAULT, 10, 'Spider');
INSERT INTO model
VALUES (DEFAULT, 13, 'Evoluzione');
INSERT INTO model
VALUES (DEFAULT, 16, 'Carrera');
INSERT INTO model
VALUES (DEFAULT, 16, 'Boxter');
INSERT INTO model
VALUES (DEFAULT, 21, 'S 80');
INSERT INTO model
VALUES (DEFAULT, 6, '300 M');
INSERT INTO model
VALUES (DEFAULT, 5, 'M3');
INSERT INTO model
VALUES (DEFAULT, 9, 'XJ 8');
INSERT INTO model
VALUES (DEFAULT, 15, '406 coupe');
INSERT INTO model
VALUES (DEFAULT, 20, '300 Atlantic');
INSERT INTO model
VALUES (DEFAULT, 14, 'Classe E');
INSERT INTO model
VALUES (DEFAULT, 11, 'GS 300');
INSERT INTO model
VALUES (DEFAULT, 5, 'Seville');
INSERT INTO model
VALUES (DEFAULT, 18, '95 Cabriolet');
INSERT INTO model
VALUES (DEFAULT, 2, 'TT coupe');
INSERT INTO model
VALUES (DEFAULT, 7, 'F 355');
INSERT INTO model
VALUES (DEFAULT, 5, 'POLO');

/* Fill Vehicle table */
INSERT INTO vehicle
VALUES (DEFAULT, 2, 6, 00000000, 1992);
INSERT INTO vehicle
VALUES (DEFAULT, 9, 20, 11111111, 1993);
INSERT INTO vehicle
VALUES (DEFAULT, 17, 8, 22222222, 1987);
INSERT INTO vehicle
VALUES (DEFAULT, 6, 12, 33333333, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 16, 23, 44444444, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 20, 6, 55555555, 1997);
INSERT INTO vehicle
VALUES (DEFAULT, 7, 8, 66666666, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 16, 14, 77777777, 1986);
INSERT INTO vehicle
VALUES (DEFAULT, 13, 15, 88888888, 1992);
INSERT INTO vehicle
VALUES (DEFAULT, 20, 22, 99999999, 1999);
INSERT INTO vehicle
VALUES (DEFAULT, 9, 16, 10101010, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 14, 20, 12121212, 1997);
INSERT INTO vehicle
VALUES (DEFAULT, 19, 17, 13131313, 1997);
INSERT INTO vehicle
VALUES (DEFAULT, 12, 21, 14141414, 1992);
INSERT INTO vehicle
VALUES (DEFAULT, 4, 19, 15151515, 1999);
INSERT INTO vehicle
VALUES (DEFAULT, 16, 21, 16161616, 1997);
INSERT INTO vehicle
VALUES (DEFAULT, 12, 11, 17171717, 1976);
INSERT INTO vehicle
VALUES (DEFAULT, 1, 2, 18181818, 1982);
INSERT INTO vehicle
VALUES (DEFAULT, 18, 7, 19191919, 1985);
INSERT INTO vehicle
VALUES (DEFAULT, 22, 2, 20202020, 1997);
INSERT INTO vehicle
VALUES (DEFAULT, 3, 19, 21212121, 1985);
INSERT INTO vehicle
VALUES (DEFAULT, 8, 19, 23232323, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 5, 25, 24242424, 1985);
INSERT INTO vehicle
VALUES (DEFAULT, 8, 9, 25252525, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 13, 5, 26262626, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 13, 10, 27272727, 1993);
INSERT INTO vehicle
VALUES (DEFAULT, 10, 7, 28282828, 1998);
INSERT INTO vehicle
VALUES (DEFAULT, 10, 3, 29292929, 1999);

/* Fill Intervention table */
INSERT INTO intervention
VALUES (DEFAULT, 3, 'Reparation', '2006-02-25 09:00:00', '2006-02-26 12:00:00', 10000);
INSERT INTO intervention
VALUES (DEFAULT, 21, 'Reparation', '2006-02-23 09:00:00', '2006-02-24 18:00:00', 30000);
INSERT INTO intervention
VALUES (DEFAULT, 25, 'Reparation', '2006-04-06 14:00:00', '2006-04-09 12:00:00', 42000);
INSERT INTO intervention
VALUES (DEFAULT, 10, 'Entretien', '2006-05-14 09:00:00', '2006-05-14 18:00:00', 10000);
INSERT INTO intervention
VALUES (DEFAULT, 6, 'Reparation', '2006-02-22 09:00:00', '2006-02-25 18:00:00', 40000);
INSERT INTO intervention
VALUES (DEFAULT, 14, 'Entretien', '2006-03-03 14:00:00', '2006-03-04 18:00:00', 7500);
INSERT INTO intervention
VALUES (DEFAULT, 1, 'Entretien', '2006-04-09 09:00:00', '2006-04-09 18:00:00', 8000);
INSERT INTO intervention
VALUES (DEFAULT, 17, 'Entretien', '2006-05-11 14:00:00', '2006-05-12 18:00:00', 9000);
INSERT INTO intervention
VALUES (DEFAULT, 22, 'Entretien', '2006-02-22 09:00:00', '2006-02-22 18:00:00', 7960);
INSERT INTO intervention
VALUES (DEFAULT, 2, 'Reparation et Entretien', '2006-04-08 09:00:00', '2006-04-09 18:00:00', 45000);
INSERT INTO intervention
VALUES (DEFAULT, 28, 'Reparation', '2006-03-08 14:00:00', '2006-03-17 12:00:00', 36000);
INSERT INTO intervention
VALUES (DEFAULT, 20, 'Reparation et Entretien', '2006-05-03 09:00:00', '2006-05-05 18:00:00', 27000);
INSERT INTO intervention
VALUES (DEFAULT, 8, 'Reparation Systeme', '2006-05-12 14:00:00', '2006-05-12 18:00:00', 17846);
INSERT INTO intervention
VALUES (DEFAULT, 1, 'Reparation', '2006-05-10 14:00:00', '2006-05-12 12:00:00', 39000);
INSERT INTO intervention
VALUES (DEFAULT, 20, 'Reparation Systeme', '2006-06-25 09:00:00', '2006-06-25 12:00:00', 27000);
INSERT INTO intervention
VALUES (DEFAULT, 7, 'Reparation', '2006-06-27 09:00:00', '2006-06-30 12:00:00', 25000);


/* Fill Intervenants table */
INSERT INTO intervenants
VALUES (1, 54, '2006-02-26 09:00:00', '2006-02-26 12:00:00');
INSERT INTO intervenants
VALUES (1, 59, '2006-02-25 09:00:00', '2006-02-25 18:00:00');
INSERT INTO intervenants
VALUES (2, 57, '2006-02-24 09:00:00', '2006-02-24 18:00:00');
INSERT INTO intervenants
VALUES (2, 59, '2006-02-23 14:00:00', '2006-02-24 12:00:00');
INSERT INTO intervenants
VALUES (3, 60, '2006-04-09 09:00:00', '2006-04-09 12:00:00');
INSERT INTO intervenants
VALUES (3, 65, '2006-04-06 09:00:00', '2006-04-08 18:00:00');
INSERT INTO intervenants
VALUES (4, 62, '2006-05-14 14:00:00', '2006-05-14 12:00:00');
INSERT INTO intervenants
VALUES (4, 66, '2006-02-14 09:00:00', '2006-05-14 18:00:00');
INSERT INTO intervenants
VALUES (5, 56, '2006-02-22 14:00:00', '2006-02-25 12:00:00');
INSERT INTO intervenants
VALUES (5, 60, '2006-02-23 09:00:00', '2006-02-25 18:00:00');
INSERT INTO intervenants
VALUES (6, 53, '2006-03-03 09:00:00', '2006-03-04 12:00:00');
INSERT INTO intervenants
VALUES (6, 57, '2006-03-04 14:00:00', '2006-03-04 18:00:00');
INSERT INTO intervenants
VALUES (7, 55, '2006-04-09 14:00:00', '2006-04-09 18:00:00');
INSERT INTO intervenants
VALUES (7, 65, '2006-04-09 14:00:00', '2006-04-09 12:00:00');
INSERT INTO intervenants
VALUES (8, 54, '2006-05-12 09:00:00', '2006-05-12 18:00:00');
INSERT INTO intervenants
VALUES (8, 62, '2006-05-11 14:00:00', '2006-05-12 12:00:00');
INSERT INTO intervenants
VALUES (9, 59, '2006-02-22 09:00:00', '2006-02-22 12:00:00');
INSERT INTO intervenants
VALUES (9, 60, '2006-02-22 14:00:00', '2006-02-22 18:00:00');
INSERT INTO intervenants
VALUES (10, 63, '2006-04-09 14:00:00', '2006-04-09 18:00:00');
INSERT INTO intervenants
VALUES (10, 67, '2006-04-08 09:00:00', '2006-04-09 12:00:00');
INSERT INTO intervenants
VALUES (11, 59, '2006-03-09 09:00:00', '2006-03-11 18:00:00');
INSERT INTO intervenants
VALUES (11, 64, '2006-03-09 09:00:00', '2006-03-17 12:00:00');
INSERT INTO intervenants
VALUES (11, 53, '2006-03-08 14:00:00', '2006-03-16 18:00:00');
INSERT INTO intervenants
VALUES (12, 55, '2006-05-05 09:00:00', '2006-05-05 18:00:00');
INSERT INTO intervenants
VALUES (12, 56, '2006-05-03 09:00:00', '2006-05-05 12:00:00');
INSERT INTO intervenants
VALUES (13, 64, '2006-05-12 14:00:00', '2006-05-12 18:00:00');
INSERT INTO intervenants
VALUES (13, 72, '2006-05-07 14:00:00', '2006-05-10 18:00:00');